# vim: filetype=neomuttrc

bind editor <space> noop

macro index \CF "<shell-escape>notmuch new<enter>" "Run mbsync to sync all mail"

# Bindings
# Movement
bind index n next-undeleted
bind index e previous-undeleted
bind pager u next-undeleted
bind pager l previous-undeleted
bind pager n next-line
bind pager e previous-line
bind browser n next-entry
bind browser e previous-entry
bind attach,index,pager g noop
bind attach,index gg first-entry
bind attach,index G last-entry
bind pager gg top
bind pager G bottom
bind index,pager,browser D half-down
bind index,pager,browser U half-up
bind attach,index,pager \Cd next-page
bind attach,index,pager \Cu previous-page
bind index R group-reply
bind index \031 previous-undeleted	# Mouse wheel
bind index \005 next-undeleted		# Mouse wheel
bind pager \031 previous-line		# Mouse wheel
bind pager \005 next-line		# Mouse wheel
bind index h noop
bind index i display-message
bind pager q exit
bind index,pager \\ vfolder-from-query
bind index,pager + entire-thread
bind index,pager . modify-labels

bind index,pager @ compose-to-sender
bind index <tab> sync-mailbox
bind index <space> collapse-thread

bind editor <tab> complete-query
bind editor ^T complete

bind index,pager <down>   sidebar-next
bind index,pager <up>     sidebar-prev
bind index,pager <right>  sidebar-open

# Macros
macro index,pager a "<modify-labels-then-hide>-inbox -deleted +archive<enter>" "Archive message"
macro index,pager d '<modify-labels-then-hide>-inbox +deleted -archive<enter>' "Delete a message"
macro index c "<change-vfolder>?" "Change folder"
macro compose \e5 \
"<pipe-message>pandoc -s -f gfm+tex_math_dollars -t html5 --katex -o /tmp/msg.html<enter>\
<attach-file>^U/tmp/msg.html<enter>\
<edit-type>^Utext/html; charset=utf-8<enter>\
<first-entry><tag-entry><tag-entry><group-alternatives><edit-description>^U<enter>"\
 "Convert markdown to html"
macro index,pager A "<pipe-message>khard add-email<return>" "Add the sender email address to khard"
