source ~/.config/ion/plugins/init.ion
source ~/.config/ion/plugins/tools/gpg-agent.ion

export SKIM_DEFAULT_OPTIONS="--multi --ansi --bind=ctrl-e:up --preview='bat --plain --color=always {}'"

fn update_rust
	let gitdr = $(git fetch --dry-run &| wc -l)
	let gitdr:int = $((gitdr))
	if test $(echo $gitdr) -ne 0
		echo "${c::red}Updating${c::reset}"
		git checkout .
		git pull --recurse-submodules
		cargo update
		cargo install --path . --force
	else
		echo "${c::green}Already updated!${c::reset}"
	end
end

if exists -s SSH_CLIENT
	# We're in an SSH session

	# Set a custom prompt
	fn PROMPT
		echo -n ${x::07}${c::0x55,bold}${USER}${c::red}'@'${c::black}${HOST}${c::default}:${c::0x4B}${SWD}${c::default}# ${c::reset}
	end
end

if matches $(uname) "Darwin"
	# We're on OSX
	# Set path to use homebrew's less
	export PATH=$PATH:/usr/local/bin
	export PAGER=$HOME/.nix-profile/bin/less
	source ~/.config/ion/plugins/tools/nix.ion
end
source ~/.cargo/env
